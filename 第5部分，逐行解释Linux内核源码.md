# 第五部分，逐行代码讲解
# 第4章，ROOT_DEV = ORIG_ROOT_DEV;

```c
ROOT_DEV = ORIG_ROOT_DEV;
```
## 0.背景解读
一个运行的计算机系统，可以从以下组成部分构成：

### 1.硬件：
- 内存、CPU、硬盘等硬件设备
### 2.软件：
- 操作系统
- 文件系统

具体来说，最开始操作系统和根文件系统都存在于磁盘上，之后操作系统会被加载到内存中去，而根文件系统里面存着所有的文件。CPU通过执行被加载到内存中的操作系统，来管理整个计算机系统的硬件。那么操作系统如何和磁盘交互？这就得通过文件系统。具体来说，操作系统内核里面有一系列数据结构和函数，为访问磁盘提供特定格式，而这些特定格式的数据又存在磁盘的文件系统里面。好了，现在问题来了，操作系统如何知道从哪里开始访问磁盘的文件系统呢？或者，换个说法，
我们要通过那种操作才能让操作系统如何知道从哪里开始访问磁盘的文件系统呢？

- 就是通过上面这段代码：
```c
ROOT_DEV = ORIG_ROOT_DEV;
```
我们先将这个赋值语句两边的变量讲清楚，再来讲解这句话是如何让操作系统达到访问磁盘文件系统的目的。

### 1.1.ORIG_ROOT_DEV
ORIG_ROOT_DEV：这是 Bootloader（setup.S）在内存中留下的一个 **“遗物”**，它记录了根分区(文件系统的起点)在哪里。

什么？有点懵？





### 1.2.ROOT_DEV
ROOT_DEV：这是**内核内部使用的全局变量**，后续代码（如**挂载根文件系统 mount_root()**）会读取这个变量，来决定**去哪个磁盘分区上找 ls、cat等等 程序**。



## 1.作用
简单来说，这段赋值代码的作用是：从 `BIOS / 引导加载程序（Bootloader）`留下的 `“遗产”` 中，`读取用户指定的 “根文件系统设备号”`，并将其赋值给`内核全局变量 ROOT_DEV`。